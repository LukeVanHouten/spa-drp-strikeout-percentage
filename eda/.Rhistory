left_join(fangraphs_data, by= "total_game_pitches") %>%
fill(gmLI)
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n())
View(granulated_data)
View(fangraphs_data <- fg_pitcher_game_logs(13892, year=2021))
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
arrange(Date) %>%
select("inLI") %>%
mutate(total_game_pitches = 1) %>%
relocate(total_game_pitches, .before=inLI)
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
arrange(Date) %>%
select("imLI") %>%
mutate(total_game_pitches = 1) %>%
relocate(total_game_pitches, .before=imLI)
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
arrange(Date) %>%
select("inLI") %>%
mutate(total_game_pitches = 1) %>%
relocate(total_game_pitches, .before=inLI)
View(fangraphs_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
left_join(fangraphs_data, by= "total_game_pitches") %>%
fill(inLI)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
arrange(Date) %>%
select("inLI") %>%
mutate(total_merge = 1) %>%
relocate(total_merge, .before=inLI)
View(fangraphs_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
mutate(to_merge = 1:n()) %>%
left_join(fangraphs_data, by= "to_merge") %>%
fill(inLI)
View(granulated_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
arrange(Date) %>%
select("inLI") %>%
mutate(to_merge = 1) %>%
relocate(to_merge, .before=inLI)
View(fangraphs_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
mutate(to_merge = 1:n()) %>%
left_join(fangraphs_data, by="to_merge") %>%
fill(inLI)
View(granulated_data)
match(fangraphs_data$to_merge, granulated_data$to_merge)
match(granulated_data$to_merge, fangraphs_data$to_merge)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
mutate(to_merge = 1:n()) %>%
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
mutate(to_merge = 1:n())
View(granulated_data)
match(fangraphs_data$to_merge, granulated_data$to_merge)
match(granulated_data$to_merge, fangraphs_data$to_merge)
granulated_data$to_merge %in% fangraphs_data$to_merge
granulated_data$to_merge[granulated_data$to_merge %in% fangraphs_data$to_merge]
sum(granulated_data$to_merge %in% fangraphs_data$to_merge)
granulated_data$to_merge[granulated_data$to_merge %in% fangraphs_data$to_merge]
match(granulated_data$to_merge, fangraphs_data$to_merge)
View(data.frame(match(granulated_data$to_merge, fangraphs_data$to_merge)))
View(data.frame(match(granulated_data$to_merge, fangraphs_data$to_merge), na.rm = TRUE))
row_indices <- data.frame(match(granulated_data$to_merge, fangraphs_data$to_merge)) %>%
colnames("index")
View(row_indices)
row_indices <- data.frame(match(granulated_data$to_merge, fangraphs_data$to_merge)) %>%
colnames("index")
row_indices <- data.frame(match(granulated_data$to_merge, fangraphs_data$to_merge))
colnames(row_indices) <- "num"
View(row_indices)
which(row_indices = 1)
which(row_indices >= 1)
which(row_indices == 1)
which(match(granulated_data$to_merge, fangraphs_data$to_merge) == 1)
which(match(granulated_data$to_merge, fangraphs_data$to_merge) == 1)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(row_count = 1:n()) %>%
group_by(game_date, at_bat_number) %>%
arrange(game_date, pitch_number, .by_group=TRUE) %>%
ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n())
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(row_count = 1:n()) %>%
arrange(desc(row_count))
# group_by(game_date, at_bat_number) %>%
# arrange(game_date, pitch_number, .by_group=TRUE) %>%
# ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n())
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(row_count = 1:n()) %>%
arrange(desc(row_count)) %>%
# group_by(game_date, at_bat_number) %>%
# arrange(game_date, pitch_number, .by_group=TRUE) %>%
# ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n())
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(row_count = 1:n()) %>%
arrange(desc(row_count)) %>%
# group_by(game_date, at_bat_number) %>%
# arrange(game_date, pitch_number, .by_group=TRUE) %>%
# ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
mutate(row_count = 1:n())
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
# group_by(game_date, at_bat_number) %>%
# arrange(game_date, pitch_number, .by_group=TRUE) %>%
# ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
# group_by(game_date, at_bat_number) %>%
# arrange(game_date, pitch_number, .by_group=TRUE) %>%
# ungroup() %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n())
View(granulated_data)
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
which(match(granulated_data$total_game_pitches,
fangraphs_data$total_game_pitches) == 1)
match(granulated_data$total_game_pitches,
fangraphs_data$total_game_pitches)
merge(granulated_data, fangraphs_data, by = 'total_game_pitches', all = TRUE)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021)
View(fg_pitcher_game_logs(13892, year=2021))
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "inLI") %>%
arrange(Date) %>%
mutate(total_game_pitches = 1) %>%
relocate(total_game_pitches, .before=inLI)
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "inLI") %>%
arrange(Date)
View(fangraphs_data)
fangraphs_data$date <- rownames(fangraphs_data)
View(merge(granulated_data, fangraphs_data))
fangraphs_data$game_date <- rownames(fangraphs_data)
View(merge(granulated_data, fangraphs_data))
fangraphs_data$date <- rownames(fangraphs_data)
View(merge(granulated_data, fangraphs_data))
library("tidyverse")
library("baseballr")
my_statcast <- function(first, last, start, end){
player_id <- playerid_lookup(last, first) %>%
pull(mlbam_id)
statcast_search_pitchers(start, end, player_id)
}
statcast_data <- my_statcast("Paul", "Sewald", "2021-04-01", "2021-10-30")
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "inLI") %>%
arrange(Date)
View(fangraphs_data)
fangraphs_data$date <- rownames(fangraphs_data)
View(merge(granulated_data, fangraphs_data))
granulated_data <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "inLI") %>%
arrange(Date)
View(fangraphs_data)
View(fg_pitcher_game_logs(13892, year=2021))
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date)
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches)
View(fangraphs_data)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
View(granulated_statcast)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
rename("Date" = "game_date")
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
rename("game_date" = "Date")
View(fangraphs_data)
granulated_data <- left_join(granulated_statcast, fangraphs_data,
by="game_date")
View(granulated_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
rename("game_date" = "Date") %>%
mutate(game_date = as.Date(game_date))
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
rename("game_date" = "Date") %>%
mutate(game_date = as.Date(game_date))
View(fangraphs_data)
granulated_data <- left_join(granulated_statcast, fangraphs_data,
by="game_date")
granulated_data <- left_join(granulated_statcast, fangraphs_data,
by="game_date")
View(granulated_data)
granulated_statcast <- statcast_data %>%
select("game_date", "release_speed", "player_name", "events", "stand",
"p_throws", "type", "pfx_x", "pfx_z", "effective_speed",
"at_bat_number", "pitch_number") %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_statcast)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
select(inLI, -Date)
mutate(total_pitches = 1:n())
View(fangraphs_data)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
select(inLI, -Date) %>%
mutate(total_pitches = 1:n())
View(fangraphs_data)
granulated_data <- left_join(granulated_statcast, fangraphs_data,
by="total_pitches")
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select("Date", "Pitches", "inLI") %>%
arrange(Date) %>%
uncount(Pitches) %>%
select(-Date) %>%
mutate(total_pitches = 1:n())
View(fangraphs_data)
View(fg_pitcher_game_logs(13892, year=2021))
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select(Date, Pitches, inLI) %>%
arrange(Date) %>%
uncount(Pitches) %>%
select(-Date) %>%
mutate(total_pitches = 1:n())
View(fangraphs_data)
granulated_statcast <- statcast_data %>%
select(game_date, release_speed, player_name, events, stand,Cp_throws, type,
pfx_x, pfx_z, effective_speed, at_bat_number, pitch_number) %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%w
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_statcast)
granulated_statcast <- statcast_data %>%
select(game_date, release_speed, player_name, events, stand, p_throws, type,
pfx_x, pfx_z, effective_speed, at_bat_number, pitch_number) %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_statcast)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select(Date, Pitches, pLI, inLI, gmLI, exLI) %>%
arrange(Date) %>%
uncount(Pitches) %>%
select(-Date) %>%
mutate(total_pitches = 1:n())
View(fangraphs_data)
granulated_data <- left_join(granulated_statcast, fangraphs_data,
by="total_pitches")
View(granulated_data)
playerid_lookup("Sewald", "Paul")
View(playerid_lookup("Sewald", "Paul"))
my_statcast <- function(first, last, start, end){
player_id <- playerid_lookup(last, first) %>%
pull(mlbam_id, fangraphs_id)
print(player_id)
# statcast_search_pitchers(start, end, player_id)
}
statcast_data <- my_statcast("Paul", "Sewald", "2021-04-01", "2021-10-30")
my_statcast <- function(first, last, start, end){
player_id <- playerid_lookup(last, first) %>%
pull(mlbam_id, fangraphs_id)
print(player_id[0])
# statcast_search_pitchers(start, end, player_id)
}
statcast_data <- my_statcast("Paul", "Sewald", "2021-04-01", "2021-10-30")
my_statcast <- function(first, last, start, end){
player_id <- playerid_lookup(last, first) %>%
select(mlbam_id, fangraphs_id)
print(player_id)
# statcast_search_pitchers(start, end, player_id)
}
statcast_data <- my_statcast("Paul", "Sewald", "2021-04-01", "2021-10-30")
my_statcast <- function(first, last, start, end){
player_id <- playerid_lookup(last, first) %>%
select(mlbam_id, fangraphs_id)
print(player_id)
statcast_search_pitchers(start, end, player_id$mlbam_id)
}
statcast_data <- my_statcast("Paul", "Sewald", "2021-04-01", "2021-10-30")
granulated_statcast <- statcast_data %>%
select(game_date, release_speed, player_name, events, stand, p_throws, type,
pfx_x, pfx_z, effective_speed, at_bat_number, pitch_number) %>%
mutate(total_pitches = 1:n()) %>%
arrange(desc(total_pitches)) %>%
group_by(game_date) %>%
mutate(total_game_pitches = 1:n()) %>%
ungroup() %>%
mutate(total_pitches = 1:n()) %>%
relocate(total_pitches, .after=total_game_pitches)
View(granulated_statcast)
fangraphs_data <- fg_pitcher_game_logs(13892, year=2021) %>%
select(Date, Pitches, pLI, inLI, gmLI, exLI) %>%
arrange(Date) %>%
uncount(Pitches) %>%
select(-Date) %>%
mutate(total_pitches = 1:n())
View(fangraphs_data)
granulated_data <- left_join(granulated_statcast, fangraphs_data,
by="total_pitches")
View(granulated_data)
print(paste(as.character(2021), "-03-01"))
print(paste0(as.character(2021), "-03-01"))
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
playerid_lookup("Sewald", "Paul")
View(playerid_lookup("Sewald", "Paul"))
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
rlang::last_error()
playerid_lookup("Sewald", "Paul")$frangraphs_id[[1]]
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
View(granulated_data)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
source("C:/Users/lukev/baseball_drp/week3.R", echo=TRUE)
View(fg_pitcher_game_logs(player_id$fangraphs_id[[1]], year=2021))
View(fg_pitcher_game_logs(playerid_lookup(last, first)$fangraphs_id[[1]], year=2021))
View(fg_pitcher_game_logs(playerid_lookup("Sewald", "Paul")$fangraphs_id[[1]], year=2021))
source("C:/Users/lukev/baseball_drp/week3.R")
source("C:/Users/lukev/baseball_drp/week3.R")
